<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CipherLink - Comunicaciones Seguras</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" defer></script>
    <script src="script.js" defer></script>
</head>
<body>
    <div id="terminal-overlay"></div>
    <div class="scan-line"></div>
    
    <!-- Pantalla de inicio - Autenticación -->
    <div class="login-screen" id="login-screen">
        <div class="pin-container">
            <div class="pin-title">CIPHERLINK - ACCESO RESTRINGIDO</div>
            <div class="typewriter">Sistema de Comunicaciones Seguras - Autenticación Requerida</div>
            
            <div class="pin-input">
                <input type="password" maxlength="1" id="pin1" class="pin-digit" data-next="pin2">
                <input type="password" maxlength="1" id="pin2" class="pin-digit" data-next="pin3">
                <input type="password" maxlength="1" id="pin3" class="pin-digit" data-next="pin4">
                <input type="password" maxlength="1" id="pin4" class="pin-digit" data-next="pin-submit">
            </div>
            
            <button id="pin-submit" class="pin-submit">VERIFICAR ACCESO</button>
            
            <div class="status-message status-error" id="pin-error">PIN incorrecto. Intente nuevamente.</div>
            
            <div class="command-prompt">> Sistema militar - Nivel de seguridad ALPHA</div>
        </div>
    </div>
    
    <!-- Aplicación principal (oculta hasta autenticación) -->
    <div class="app-container" id="app-container">
        <header>
            <h1>CIPHERLINK</h1>
            <p class="creator">Sistema de Comunicaciones Seguras</p>
        </header>
        
        <div class="status-bar">
            <div>Estado: <span id="connection-status">CIFRADO</span></div>
            <div>Tu IP: <span id="user-ip">[CIFRADO]</span></div>
            <div>ID Dispositivo: <span id="device-id">[CARGANDO]</span></div>
            <div>Sesión: <span id="session-status">ACTIVA</span></div>
            <div>Expira: <span id="session-expires">10:00</span></div>
        </div>
        
        <div class="status-message status-success" id="status-message"></div>
        <div class="status-message status-error" id="error-message"></div>
        
        <div id="chat-container">
            <div class="message system">
                <div class="message-header">SISTEMA CIPHERLINK</div>
                <div class="message-content">
                    Conexión segura establecida. Todos los mensajes cifrados de extremo a extremo.
                </div>
                <div class="timestamp">Sistema iniciado</div>
            </div>
        </div>
        
        <div id="input-container">
            <input type="text" id="message-input" placeholder="Escriba su mensaje seguro..." required autocomplete="off">
            <button type="button" id="send-button">ENVIAR</button>
        </div>
        
        <button id="clear-chat">
            BORRAR HISTORIAL DE COMUNICACIONES
        </button>
        
        <div class="admin-panel" id="admin-panel">
            <div class="admin-title">PANEL DE ADMINISTRADOR</div>
            <div class="pin-change-container">
                <input type="password" id="new-pin-input" placeholder="Nuevo PIN de 4 dígitos" maxlength="4">
                <button id="change-pin-btn">CAMBIAR PIN</button>
            </div>
            <div class="status-message status-success" id="pin-change-success"></div>
        </div>
        
        <div class="legal-notice">
            Sistema de Comunicaciones Militares CipherLink - Todos los mensajes cifrados AES-256<br>
            © 2025 Sebastian P. - Uso exclusivo autorizado
        </div>
    </div>
</body>
</html>
